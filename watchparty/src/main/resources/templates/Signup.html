<html>
	<head>
	<title>Signup Design</title>
	<link rel="stylesheet" type="text/css" href="../css/Signup.css">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
	<script>
		function createUser () {
			if (document.createForm.pw.value != document.createForm.confirmPw.value) {
				document.getElementById("passField").innerHTML = "<font>Passwords must match</font>";
				return false;
			}
			
			var xhttp = new XMLHttpRequest();
			xhttp.open("GET", "api/createUser?username=" + document.createForm.username.value + "&password=" + document.createForm.pw.value, false);
			xhttp.send();
			console.log(xhttp.responseText);
			if (xhttp.responseText === "success") {
				sessionStorage.setItem("username", document.createForm.username.value);
				window.location.href = "/";
			} else {
				document.getElementById("passField").innerHTML = "An account already exists for" + document.createForm.username.value;
			}
			
			return false;
		}
	</script>
	<body>
		<div class="signupform">
			<img src="../Images/trojanhead.jpg" class="trojanhead">
			<h1>Sign up Here</h1>
			<form name="createForm">
				<p id="usernameField">Username</p>
				<input type="text" name="username" placeholder="Enter a Username">
				<p>Password</p>
				<input type="Password" name="pw" placeholder="Enter a Password">
				<p>Confirm Password</p>
				<input type="Password" name="confirmPw" placeholder="Confirm the Password">
				<p id="passField"></p>
				<input type="submit" name="" value="Sign up" onClick="return createUser()">
				<a href="/login"> Already a User? Log in Here!</a>
			</form>
		</div>
	
	<body>
	</head>
</html>